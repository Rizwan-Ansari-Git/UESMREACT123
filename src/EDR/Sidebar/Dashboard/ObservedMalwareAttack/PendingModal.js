import React, { useState, useEffect } from 'react'
import axios from 'axios';
import Button from 'react-bootstrap/Button';
import Modal from 'react-bootstrap/Modal';
import 'bootstrap/dist/css/bootstrap.min.css';
import Api from '../../../../ConfigFile/Api';



const PendingModal = ({ show, handleClose, value }) => {

    const [recentFiles, setRecentFiles] = useState([]);

    useEffect(() => {
        const fetchData = async () => {
            try {
                const response = await Api.get(`/observeMalware/pendingFileModal?status=${value}`);
                setRecentFiles(response.data.data.Pending_Files);
            } catch (error) {
                console.error('Error fetching data:', error);
            }
        };

        if (show) {
            fetchData();
        }
    }, [show, value]);

    return (
        <>

            <Modal show={show} onHide={handleClose} size="xl" aria-labelledby="example-modal-sizes-title-xl">
                <Modal.Header closeButton>
                    <div className="row" style={{ width: '100%' }}>
                        <div className="col-md-4"></div>
                        <div className="col-md-4">
                        <h4 className="modal-title" style={{ textAlign: 'center' }}>
                            {value === 'false' ? 'Pending Scanned File' : 'Successfully Scanned File'}
                            </h4>

                        </div>

                        <div className="col-md-4"></div>
                    </div>
                </Modal.Header>
                <Modal.Body>
                    <table className="table table-bordered" id="pending_data" style={{ width: '100%' }}>
                        <thead>
                            <tr>
                                <th>Sr No</th>
                                <th>File Name</th>
                                <th>File Status</th>
                                <th>Connection Time</th>
                            </tr>
                        </thead>
                        <tbody>
                            {
                                recentFiles.map((file, index) => (
                                    <tr key={index + 1}>
                                        <td>{index + 1}</td>
                                        <td>{file.fileName}</td>
                                        <td>{file.fileStatus === 'false' ? 'Pending' : 'Successfully'}</td>
                                        <td>{file.dateTime}</td>
                                    </tr>
                                ))
                            }

                        </tbody>
                    </table>
                </Modal.Body>
                <Modal.Footer>
                    <Button variant="secondary" onClick={handleClose}>
                        Close
                    </Button>
                </Modal.Footer>
            </Modal>

        </>

    );
}

export default PendingModal