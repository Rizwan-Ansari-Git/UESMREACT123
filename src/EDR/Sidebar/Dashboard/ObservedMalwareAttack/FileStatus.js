import React, { useState, useEffect } from 'react'
import axios from 'axios';
import PieChart from './PieChart';
import PendingModal from './PendingModal';
import Api from '../../../../ConfigFile/Api';





function FileStatus() {
  const [users, setDashboardData] = useState({});
  const [modalStatus, setModalStatus] = useState('');

  useEffect(() => {
    const fetchData = async () => {
      try {
        const response = await Api.get(`/observeMalware/totalScannedFileStatus`);
        setDashboardData(response.data.data);
      } catch (error) {
        console.error('Error fetching data:', error);
      }
    };

    fetchData();
  }, []);

  const { Successfully, Pending } = users;
  const pending = Number(Pending) || 0;
  const successfully = Number(Successfully) || 0;

  const total = pending + successfully;
  // console.log(total);


  const [showModal, setShowModal] = useState(false);
  const handleShow = (value) => {
    setModalStatus(value);
    setShowModal(true);
  };

  const handleClose  = () => {
    setShowModal(false);
  };

  // const handleShow = () => setShowModal(true);
  // const handleClose = () => setShowModal(false);


  return (



    <>
      <div>
        <div className="row nirvana-card-color" style={{ padding: '1%', paddingLeft: '7%', paddingRight: '7%', width: '99%' }}>
          <div className="row">
            <div className="col-md-8">
              <div className="row" style={{ padding: '1%' }}>
                <div className="col-md-4" id="Total_list">
                  <div className="description-block" style={{ height: '90px' }}>
                    <div className="row">
                      <span style={{ fontWeight: 'bold', fontSize: '28px' }}>Total</span>
                      <span style={{ fontSize: '18px', color: '#black' }}> Submitted Files</span>
                    </div>
                    <div className="row">
                      <center>
                        <div className="col-sm-6" style={{ padding: '0%' }}>
                          <div className="row">
                            <div className="col-sm-2" style={{ padding: '0%', paddingTop: '52px' }}>
                              {/* <FontAwesomeIcon icon={faPlay} style={{ color: '#ffffffc7' }} /> */}
                            </div>
                            <div className="col-sm-10" style={{ padding: '0%' }}>
                              <span id="Total_Scanned_Files" style={{ fontWeight: 'bold', fontSize: '75px', color: 'black' }}>
                                {total}
                                {/* {totalFiles || <FontAwesomeIcon icon={faSpinner} spin />} */}
                              </span>
                            </div>
                          </div>
                        </div>
                      </center>
                    </div>
                  </div>
                </div>
                <div className="col-md-4" style={{ paddingTop: '5%' }}   >
                  <div className="description-block border-left-su" style={{ height: '54px', borderLeft: '2px solid rgba(16, 16, 16, 0.21)' }}>
                    <div className="row">
                      <span style={{ fontWeight: 'bold', fontSize: '22px' }}>Pending</span>
                      <span style={{ fontSize: '15px', color: '#black' }}> Scan Files</span>
                    </div>
                    <div className="row">
                      <center>
                        <div className="col-sm-6" style={{ padding: '0%' }} onClick={() => handleShow('false')}>
                          {/* <FontAwesomeIcon icon={faTimesCircle} style={{ fontSize: '17px', color: '#ffb216' }} /> */}
                          <span id="Pending" style={{ fontWeight: 'bold', fontSize: '45px', color: '#ffb216' }}>
                            {/* {pendingFiles || <FontAwesomeIcon icon={faSpinner} spin />} */}
                            {Pending}
                          </span>
                        </div>
                      </center>
                    </div>
                  </div>
                  <PendingModal show={showModal} handleClose={handleClose}  value={modalStatus} />
                </div>
                <div className="col-md-4" style={{ paddingTop: '5%' }} id="Successfully_list">
                  <div className="description-block border-left-su" style={{ height: '54px', borderLeft: '2px solid rgba(16, 16, 16, 0.21)' }}>
                    <div className="row">
                      <span style={{ fontWeight: 'bold', fontSize: '22px' }}>Successfully</span>
                      <span style={{ fontSize: '15px', color: '#black' }}> Scanned File</span>
                    </div>
                    <div className="row">
                      <center>
                        <div className="col-sm-6" style={{ padding: '0%' }} onClick={() => handleShow('true')}>
                          <div className="row">
                            <div className="col-sm-2" style={{ padding: '0%', paddingTop: '29px' }}>
                              {/* <FontAwesomeIcon icon={faCheckCircle} style={{ fontSize: '17px', color: '#04bc53' }} /> */}
                            </div>
                            <div className="col-sm-10" style={{ padding: '0%' }}>
                              <span id="Successfully" style={{ fontWeight: 'bold', fontSize: '45px', color: '#04bc53' }}>
                                {/* {successfulFiles || <FontAwesomeIcon icon={faSpinner} spin />} */}
                                {Successfully}
                              </span>
                            </div>
                          </div>
                        </div>
                      </center>
                    </div>
                  </div>
                  <PendingModal show={showModal} handleClose={handleClose}  value={modalStatus} />
                </div>
              </div>
            </div>
            <div className="col-md-4">
              {/* Pie chart placeholder */}
              <PieChart />
            </div>
          </div>
        </div>



      </div>
    </>
  );
}

export default FileStatus